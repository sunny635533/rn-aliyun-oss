{"version":3,"sources":["AliyunOss.ts"],"names":["Oss","NativeModules","defaultConfig","configuration","maxRetryCount","timeoutIntervalForRequest","timeoutIntervalForResource","accessKey","secretKey","endPoint","bucketName","AliyunOss","constructor","config","setConfig","initWithPlainTextAccessKey","_","merge","asyncUpload","input","objectKey","filepath","asyncDownload"],"mappings":";;;;;;;AAAA;;AAGA;;;;;;AAIA,MAAMA,GAAY,GAAGC,2BAAcD,GAAnC;AAEA,MAAME,aAAgC,GAAG;AACrCC,EAAAA,aAAa,EAAE;AACXC,IAAAA,aAAa,EAAE,CADJ;AAEXC,IAAAA,yBAAyB,EAAE,EAFhB;AAGXC,IAAAA,0BAA0B,EAAE,KAAK,EAAL,GAAU;AAH3B,GADsB;AAMrCC,EAAAA,SAAS,EAAE,EAN0B;AAOrCC,EAAAA,SAAS,EAAE,EAP0B;AAQrCC,EAAAA,QAAQ,EAAE,EAR2B;AASrCC,EAAAA,UAAU,EAAE;AATyB,CAAzC;;AAYA,MAAMC,SAAN,CAAgB;AAIZC,EAAAA,WAAW,CAACC,MAAD,EAAqC;AAAA,oCAFbX,aAEa;;AAC5C,SAAKY,SAAL,CAAeD,MAAf;AACA,SAAKE,0BAAL;AACH;;AAEDD,EAAAA,SAAS,CAACD,MAAD,EAAqC;AAC1C,SAAKA,MAAL,GAAcG,gBAAEC,KAAF,CAAQ,KAAKJ,MAAb,EAAqBA,MAArB,CAAd;AACH;;AAEDE,EAAAA,0BAA0B,GAAG;AACzBf,IAAAA,GAAG,CAACe,0BAAJ,CAA+B,KAAKF,MAAL,CAAYN,SAA3C,EAAsD,KAAKM,MAAL,CAAYL,SAAlE,EAA6E,KAAKK,MAAL,CAAYJ,QAAzF,EAAmG,KAAKI,MAAL,CAAYV,aAA/G;AACH;AAED;AACJ;AACA;;;AACIe,EAAAA,WAAW,CAACC,KAAD,EAA0B;AACjC,WAAOnB,GAAG,CAACkB,WAAJ,CAAgB,KAAKL,MAAL,CAAYH,UAA5B,EAAwCS,KAAK,CAACC,SAA9C,EAAyDD,KAAK,CAACE,QAA/D,CAAP;AACH;AAED;AACJ;AACA;;;AACIC,EAAAA,aAAa,CAACH,KAAD,EAA4B;AACrC,WAAOnB,GAAG,CAACsB,aAAJ,CAAkB,KAAKT,MAAL,CAAYH,UAA9B,EAA0CS,KAAK,CAACC,SAAhD,EAA2DD,KAAK,CAACE,QAAjE,CAAP;AACH;;AA7BW;;eAiCDV,S","sourcesContent":["import {\r\n    NativeModules,\r\n} from 'react-native';\r\nimport _ from 'lodash'\r\nimport type { DefaultConfigType, OssType, AsyncUploadInput, AsyncDownloadInput } from './types'\r\n\r\n\r\nconst Oss: OssType = NativeModules.Oss;\r\n\r\nconst defaultConfig: DefaultConfigType = {\r\n    configuration: {\r\n        maxRetryCount: 3,\r\n        timeoutIntervalForRequest: 30,\r\n        timeoutIntervalForResource: 24 * 60 * 60\r\n    },\r\n    accessKey: '',\r\n    secretKey: '',\r\n    endPoint: '',\r\n    bucketName: ''\r\n};\r\n\r\nclass AliyunOss {\r\n\r\n    public config: DefaultConfigType = defaultConfig;\r\n\r\n    constructor(config: Partial<DefaultConfigType>) {\r\n        this.setConfig(config);\r\n        this.initWithPlainTextAccessKey();\r\n    }\r\n\r\n    setConfig(config: Partial<DefaultConfigType>) {\r\n        this.config = _.merge(this.config, config);\r\n    }\r\n\r\n    initWithPlainTextAccessKey() {\r\n        Oss.initWithPlainTextAccessKey(this.config.accessKey, this.config.secretKey, this.config.endPoint, this.config.configuration);\r\n    }\r\n\r\n    /**\r\n     * Asynchronously uploading\r\n     */\r\n    asyncUpload(input: AsyncUploadInput) {\r\n        return Oss.asyncUpload(this.config.bucketName, input.objectKey, input.filepath);\r\n    }\r\n\r\n    /**\r\n   * Asynchronously downloading\r\n   */\r\n    asyncDownload(input: AsyncDownloadInput) {\r\n        return Oss.asyncDownload(this.config.bucketName, input.objectKey, input.filepath);\r\n    }\r\n\r\n}\r\n\r\nexport default AliyunOss;"]}